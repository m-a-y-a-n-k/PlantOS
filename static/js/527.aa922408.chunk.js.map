{"version":3,"file":"static/js/527.aa922408.chunk.js","mappings":"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","sources":["helpers/WebCam/index.ts","helpers/plantDetector.ts","helpers/plantApiService.ts","helpers/fetchPlantInfo.ts","components/DetectedPlantInfo/index.tsx","components/common/AlertBox.tsx","components/Canvas/index.tsx","components/common/OptimizedImage.tsx"],"sourcesContent":["class Webcam {\n  webcamElement: HTMLVideoElement;\n  canvasElement: HTMLCanvasElement;\n\n  constructor(webcamElement: HTMLVideoElement, canvasElement: HTMLCanvasElement) {\n    this.webcamElement = webcamElement;\n    this.canvasElement = canvasElement;\n  }\n\n  adjustVideoSize = (width: number, height: number) => {\n    const aspectRatio = width / height;\n    if (width >= height) {\n      this.webcamElement.width = aspectRatio * this.webcamElement.height;\n    } else {\n      this.webcamElement.height = this.webcamElement.width / aspectRatio;\n    }\n  };\n\n  setup = async (): Promise<void> => {\n    return new Promise<void>((resolve, reject) => {\n      if (navigator.mediaDevices.getUserMedia !== undefined) {\n        navigator.mediaDevices\n          .getUserMedia({\n            audio: false,\n            video: { facingMode: \"environment\" },\n          })\n          .then((mediaStream) => {\n            if (\"srcObject\" in this.webcamElement) {\n              this.webcamElement.srcObject = mediaStream;\n            } else {\n              // For older browsers without the srcObject.\n              (this.webcamElement as any).src = (window.URL as any).createObjectURL(mediaStream);\n            }\n            this.webcamElement.addEventListener(\n              \"loadeddata\",\n              async () => {\n                this.adjustVideoSize(\n                  this.webcamElement.videoWidth,\n                  this.webcamElement.videoHeight\n                );\n                resolve();\n              },\n              false\n            );\n          });\n      } else {\n        reject();\n      }\n    });\n  };\n\n  _drawImage = () => {\n    const imageWidth = this.webcamElement.videoWidth;\n    const imageHeight = this.webcamElement.videoHeight;\n\n    const context = this.canvasElement.getContext(\"2d\");\n    if (!context) {\n      throw new Error(\"Could not get 2D context from canvas\");\n    }\n    \n    this.canvasElement.width = imageWidth;\n    this.canvasElement.height = imageHeight;\n\n    context.drawImage(this.webcamElement, 0, 0, imageWidth, imageHeight);\n    return { imageHeight, imageWidth };\n  };\n\n  takeBlobPhoto = (): Promise<{ blob: Blob | null; imageHeight: number; imageWidth: number }> => {\n    const { imageWidth, imageHeight } = this._drawImage();\n    return new Promise((resolve, reject) => {\n      this.canvasElement.toBlob((blob) => {\n        resolve({ blob, imageHeight, imageWidth });\n      });\n    });\n  };\n\n  takeBase64Photo = ({ type, quality }: { type?: string; quality?: number } = { type: \"png\", quality: 1 }): { base64: string; imageHeight: number; imageWidth: number } => {\n    const { imageHeight, imageWidth } = this._drawImage();\n    const base64 = this.canvasElement.toDataURL(\"image/\" + type, quality);\n    return { base64, imageHeight, imageWidth };\n  };\n}\n\nexport default Webcam;\n","import { useEffect, useState } from 'react';\nimport { MLResult } from '../types/plant';\n\n// Declare ml5 global\ndeclare global {\n  interface Window {\n    ml5: any;\n  }\n}\n\nconst ml5 = (window as any).ml5;\n\n// Image preprocessing for better plant detection\nfunction preprocessImage(imageElement: HTMLImageElement): HTMLCanvasElement {\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d')!;\n  \n  // Set canvas size to model input requirements\n  canvas.width = 224;\n  canvas.height = 224;\n  \n  // Draw and resize image\n  ctx.drawImage(imageElement, 0, 0, 224, 224);\n  \n  // Apply image enhancements for plant detection\n  const imageData = ctx.getImageData(0, 0, 224, 224);\n  const data = imageData.data;\n  \n  // Enhance green channel for better plant detection\n  for (let i = 0; i < data.length; i += 4) {\n    // Enhance green channel (plants are typically green)\n    data[i + 1] = Math.min(255, data[i + 1] * 1.1);\n    \n    // Reduce noise by slight smoothing\n    if (i > 4 && i < data.length - 4) {\n      const avgR = (data[i - 4] + data[i] + data[i + 4]) / 3;\n      const avgG = (data[i - 3] + data[i + 1] + data[i + 5]) / 3;\n      const avgB = (data[i - 2] + data[i + 2] + data[i + 6]) / 3;\n      \n      data[i] = avgR;\n      data[i + 1] = avgG;\n      data[i + 2] = avgB;\n    }\n  }\n  \n  ctx.putImageData(imageData, 0, 0);\n  return canvas;\n}\n\n// Enhanced detection with multiple models\nasync function detect(base64: string, classifiers: any): Promise<MLResult[]> {\n  const img = new Image();\n  img.src = base64;\n  await img.decode();\n  \n  // Preprocess image for better plant detection\n  const processedCanvas = preprocessImage(img);\n  \n  const results = [];\n  \n  // Use MobileNet for general classification\n  if (classifiers.mobilenet) {\n    try {\n      const mobileNetResults = await classifiers.mobilenet.classify(processedCanvas);\n      results.push(...mobileNetResults.map((r: any) => ({ ...r, model: 'MobileNet' })));\n    } catch (error) {\n      console.warn('MobileNet classification failed:', error);\n    }\n  }\n  \n  // Use DenseNet for more detailed classification\n  if (classifiers.densenet) {\n    try {\n      const denseNetResults = await classifiers.densenet.classify(processedCanvas);\n      results.push(...denseNetResults.map((r: any) => ({ ...r, model: 'DenseNet' })));\n    } catch (error) {\n      console.warn('DenseNet classification failed:', error);\n    }\n  }\n  \n  // Filter and enhance plant-related results\n  const plantKeywords = [\n    'plant', 'leaf', 'flower', 'tree', 'grass', 'herb', 'fern', 'moss',\n    'succulent', 'cactus', 'vine', 'shrub', 'bush', 'weed', 'bloom',\n    'petal', 'stem', 'root', 'seed', 'fruit', 'vegetable', 'crop'\n  ];\n  \n  const plantResults = results.filter((result: any) => \n    plantKeywords.some((keyword: string) => \n      result.label.toLowerCase().includes(keyword)\n    )\n  );\n  \n  // If we found plant-specific results, prioritize them\n  if (plantResults.length > 0) {\n    return plantResults.sort((a: any, b: any) => b.confidence - a.confidence);\n  }\n  \n  // Otherwise return all results sorted by confidence\n  return results.sort((a: any, b: any) => b.confidence - a.confidence);\n}\n\n// Enhanced plant detector hook with multiple models\nexport default function usePlantDetector() {\n  const [classifiers, setClassifiers] = useState({\n    mobilenet: null,\n    densenet: null\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const initializeModels = async () => {\n      try {\n        setLoading(true);\n        \n        // Initialize MobileNet (fast, general purpose)\n        const mobilenet = ml5.imageClassifier(\"MobileNet\");\n        \n        // Try to initialize DenseNet (more accurate for complex images)\n        let densenet = null;\n        try {\n          densenet = ml5.imageClassifier(\"DenseNet\");\n        } catch (denseNetError) {\n          console.warn('DenseNet not available, using MobileNet only:', denseNetError);\n        }\n        \n        setClassifiers({\n          mobilenet,\n          densenet\n        });\n        \n        setLoading(false);\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to load AI models');\n        setLoading(false);\n      }\n    };\n\n    initializeModels();\n  }, []);\n\n  const ready = !loading && !error && classifiers.mobilenet;\n\n  return { \n    detect, \n    ready, \n    classifiers, \n    loading, \n    error,\n    modelCount: Object.values(classifiers).filter(Boolean).length\n  };\n}","import { PlantDetails, ApiKeys, BaseUrls, CachedData } from '../types/plant';\n\n// Enhanced Plant API Service with multiple providers\nclass PlantApiService {\n  private apiKeys: ApiKeys;\n  private baseUrls: BaseUrls;\n  private cache: Map<string, CachedData<any>>;\n  private cacheTimeout: number;\n\n  constructor() {\n    this.apiKeys = {\n      plantId: process.env.REACT_APP_PLANT_ID_API_KEY,\n      perenual: process.env.REACT_APP_PERENUAL_API_KEY,\n      plantNet: process.env.REACT_APP_PLANTNET_API_KEY\n    };\n    \n    this.baseUrls = {\n      plantId: 'https://api.plant.id/v3',\n      perenual: 'https://perenual.com/api',\n      plantNet: 'https://my-api.plantnet.org/v1',\n      trefle: 'https://trefle.io/api/v1'\n    };\n    \n    this.cache = new Map();\n    this.cacheTimeout = 24 * 60 * 60 * 1000; // 24 hours\n  }\n\n  // Convert base64 image to blob for API upload\n  base64ToBlob(base64String: string): Blob {\n    const byteCharacters = atob(base64String.split(',')[1]);\n    const byteNumbers = new Array(byteCharacters.length);\n    \n    for (let i = 0; i < byteCharacters.length; i++) {\n      byteNumbers[i] = byteCharacters.charCodeAt(i);\n    }\n    \n    const byteArray = new Uint8Array(byteNumbers);\n    return new Blob([byteArray], { type: 'image/jpeg' });\n  }\n\n  // Plant.id API - Most accurate for plant identification\n  async identifyWithPlantId(base64Image: string): Promise<PlantDetails | null> {\n    if (!this.apiKeys.plantId) {\n      throw new Error('Plant.id API key not configured');\n    }\n\n    const blob = this.base64ToBlob(base64Image);\n    const formData = new FormData();\n    \n    formData.append('images', blob);\n    formData.append('modifiers', JSON.stringify([\n      'crops_fast', 'similar_images', 'health_only', 'disease_similar_images'\n    ]));\n    formData.append('plant_language', 'en');\n    formData.append('plant_details', JSON.stringify([\n      'common_names', 'url', 'description', 'taxonomy', 'rank',\n      'gbif_id', 'inaturalist_id', 'image', 'synonyms', 'edible_parts',\n      'watering', 'propagation_methods'\n    ]));\n\n    try {\n      const response = await fetch(`${this.baseUrls.plantId}/identification`, {\n        method: 'POST',\n        headers: {\n          'Api-Key': this.apiKeys.plantId,\n        },\n        body: formData\n      });\n\n      if (!response.ok) {\n        throw new Error(`Plant.id API error: ${response.status}`);\n      }\n\n      const data = await response.json();\n      return this.formatPlantIdResponse(data);\n    } catch (error) {\n      console.error('Plant.id identification failed:', error);\n      throw error;\n    }\n  }\n\n  // Perenual API - Good for plant care information\n  async getPlantCareInfo(plantName: string): Promise<PlantDetails | null> {\n    if (!this.apiKeys.perenual) {\n      console.warn('Perenual API key not configured, using fallback data');\n      return this.getFallbackPlantInfo(plantName);\n    }\n\n    const cacheKey = `perenual_${plantName}`;\n    const cached = this.getCachedData(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const searchResponse = await fetch(\n        `${this.baseUrls.perenual}/species-list?key=${this.apiKeys.perenual}&q=${encodeURIComponent(plantName)}`\n      );\n\n      if (!searchResponse.ok) {\n        throw new Error(`Perenual search error: ${searchResponse.status}`);\n      }\n\n      const searchData = await searchResponse.json();\n      \n      if (searchData.data && searchData.data.length > 0) {\n        const plantId = searchData.data[0].id;\n        \n        const detailResponse = await fetch(\n          `${this.baseUrls.perenual}/species/details/${plantId}?key=${this.apiKeys.perenual}`\n        );\n\n        if (detailResponse.ok) {\n          const detailData = await detailResponse.json();\n          const formatted = this.formatPerenualResponse(detailData);\n          this.setCachedData(cacheKey, formatted);\n          return formatted;\n        }\n      }\n\n      return this.getFallbackPlantInfo(plantName);\n    } catch (error) {\n      console.error('Perenual API failed:', error);\n      return this.getFallbackPlantInfo(plantName);\n    }\n  }\n\n  // PlantNet API - Open source plant identification\n  async identifyWithPlantNet(base64Image: string): Promise<PlantDetails | null> {\n    if (!this.apiKeys.plantNet) {\n      throw new Error('PlantNet API key not configured');\n    }\n\n    const blob = this.base64ToBlob(base64Image);\n    const formData = new FormData();\n    \n    formData.append('images', blob);\n    formData.append('organs', 'leaf');\n    formData.append('nb-results', '5');\n\n    try {\n      const response = await fetch(\n        `${this.baseUrls.plantNet}/identify/weurope?api-key=${this.apiKeys.plantNet}`,\n        {\n          method: 'POST',\n          body: formData\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(`PlantNet API error: ${response.status}`);\n      }\n\n      const data = await response.json();\n      return this.formatPlantNetResponse(data);\n    } catch (error) {\n      console.error('PlantNet identification failed:', error);\n      throw error;\n    }\n  }\n\n  // Main identification method that tries multiple APIs\n  async identifyPlant(base64Image: string, plantLabel: string | null = null): Promise<PlantDetails | null> {\n    const results = [];\n\n    // Try Plant.id first (most accurate)\n    try {\n      const plantIdResult = await this.identifyWithPlantId(base64Image);\n      if (plantIdResult && plantIdResult.confidence > 0.3) {\n        results.push({ ...plantIdResult, source: 'Plant.id' });\n      }\n    } catch (error) {\n      console.warn('Plant.id failed, trying alternatives');\n    }\n\n    // Try PlantNet as backup\n    try {\n      const plantNetResult = await this.identifyWithPlantNet(base64Image);\n      if (plantNetResult && plantNetResult.confidence > 0.2) {\n        results.push({ ...plantNetResult, source: 'PlantNet' });\n      }\n    } catch (error) {\n      console.warn('PlantNet failed');\n    }\n\n    // If we have a plant label from ML5, get care info\n    if (plantLabel) {\n      try {\n        const careInfo = await this.getPlantCareInfo(plantLabel);\n        if (careInfo) {\n          results.push({ ...careInfo, source: 'Perenual', fromML: true });\n        }\n      } catch (error) {\n        console.warn('Care info retrieval failed');\n      }\n    }\n\n    // Return best result or fallback\n    if (results.length > 0) {\n      return results.sort((a, b) => (b.confidence || 0) - (a.confidence || 0))[0];\n    }\n\n    return this.getFallbackPlantInfo(plantLabel || 'Unknown Plant');\n  }\n\n  // Format Plant.id API response\n  formatPlantIdResponse(data: any): PlantDetails | null {\n    if (!data.suggestions || data.suggestions.length === 0) {\n      return null;\n    }\n\n    const suggestion = data.suggestions[0];\n    const plant = suggestion.plant_details;\n\n    return {\n      label: plant.common_names?.[0] || plant.scientific_name,\n      scientificName: plant.scientific_name,\n      confidence: suggestion.probability,\n      description: plant.description?.value || 'No description available',\n      commonNames: plant.common_names || [],\n      family: plant.taxonomy?.family,\n      genus: plant.taxonomy?.genus,\n      watering: plant.watering?.max || 'Regular watering',\n      light: 'Bright indirect light', // Default as not provided by Plant.id\n      propagation: plant.propagation_methods || [],\n      edibleParts: plant.edible_parts || [],\n      image: plant.image?.value,\n      gbifId: plant.gbif_id,\n      inaturalistId: plant.inaturalist_id,\n      synonyms: plant.synonyms || [],\n      source: 'Plant.id'\n    };\n  }\n\n  // Format PlantNet API response\n  formatPlantNetResponse(data: any): PlantDetails | null {\n    if (!data.results || data.results.length === 0) {\n      return null;\n    }\n\n    const result = data.results[0];\n    const species = result.species;\n\n    return {\n      label: species.commonNames?.[0] || species.scientificNameWithoutAuthor,\n      scientificName: species.scientificNameWithoutAuthor,\n      confidence: result.score,\n      description: `${species.genus.scientificNameWithoutAuthor} species`,\n      family: species.family.scientificNameWithoutAuthor,\n      genus: species.genus.scientificNameWithoutAuthor,\n      images: result.images?.map((img: any) => img.url.o) || [],\n      source: 'PlantNet'\n    };\n  }\n\n  // Format Perenual API response\n  formatPerenualResponse(data: any): PlantDetails {\n    return {\n      label: data.common_name || data.scientific_name?.[0],\n      scientificName: data.scientific_name?.[0],\n      confidence: 0.7,\n      description: data.description || 'No description available',\n      watering: data.watering || 'Regular watering',\n      light: data.sunlight?.join(', ') || 'Bright indirect light',\n      source: 'Perenual',\n      care: {\n        hardiness: data.hardiness?.min && data.hardiness?.max \n          ? `Zones ${data.hardiness.min}-${data.hardiness.max}` \n          : 'Unknown',\n        maintenance: data.maintenance || 'Medium',\n        growthRate: data.growth_rate || 'Medium',\n        droughtTolerant: data.drought_tolerant || false,\n        saltTolerant: data.salt_tolerant || false,\n        thorny: data.thorny || false,\n        invasive: data.invasive || false,\n        tropical: data.tropical || false,\n        indoor: data.indoor || false,\n        careLevel: data.care_level || 'Medium'\n      },\n      dimensions: {\n        minHeight: data.dimension?.min_value,\n        maxHeight: data.dimension?.max_value,\n        unit: data.dimension?.unit\n      },\n      image: data.default_image?.original_url,\n      cycle: data.cycle,\n      attracts: data.attracts || [],\n      propagation: data.propagation || [],\n      pruningMonth: data.pruning_month || [],\n      pruningCount: data.pruning_count || [],\n      seeds: data.seeds || 0,\n      flowers: data.flowers || false,\n      flowering_season: data.flowering_season,\n      color: data.flower_color,\n      soilRequirements: data.soil || []\n    };\n  }\n\n  // Fallback plant information when APIs fail\n  getFallbackPlantInfo(plantName: string): PlantDetails {\n    const fallbackData: Record<string, Partial<PlantDetails>> = {\n      'daisy': {\n        label: 'Daisy',\n        scientificName: 'Bellis perennis',\n        description: 'A common flowering plant with white petals and yellow center.',\n        light: 'Full sun to partial shade',\n        watering: 'Regular watering, allow soil to dry between waterings',\n        uses: 'Ornamental, medicinal (traditional use)'\n      },\n      'rose': {\n        label: 'Rose',\n        scientificName: 'Rosa spp.',\n        description: 'Popular flowering shrub known for its fragrant blooms.',\n        light: 'Full sun (6+ hours daily)',\n        watering: 'Deep watering 1-2 times per week',\n        uses: 'Ornamental, cut flowers, essential oils'\n      },\n      'sunflower': {\n        label: 'Sunflower',\n        scientificName: 'Helianthus annuus',\n        description: 'Large flowering plant that follows the sun across the sky.',\n        light: 'Full sun',\n        watering: 'Regular watering, drought tolerant when established',\n        uses: 'Seeds for food and oil, ornamental'\n      }\n    };\n\n    const normalizedName = plantName.toLowerCase().replace(/[^a-z]/g, '');\n    \n    // Try to find a match in fallback data\n    for (const [key, data] of Object.entries(fallbackData)) {\n      if (normalizedName.includes(key) || key.includes(normalizedName)) {\n        return { \n          confidence: 0.5, \n          source: 'Fallback',\n          ...data\n        } as PlantDetails;\n      }\n    }\n\n    // Generic fallback\n    return {\n      label: plantName || 'Unknown Plant',\n      scientificName: 'Species not identified',\n      description: 'This appears to be a plant, but we could not identify the specific species. Consider consulting a local botanist or plant identification expert.',\n      light: 'Varies by species - observe current growing conditions',\n      watering: 'Monitor soil moisture - most plants prefer soil that dries slightly between waterings',\n      uses: 'Unknown - research before consumption or medicinal use',\n      confidence: 0.1,\n      source: 'Generic Fallback'\n    };\n  }\n\n  // Cache management\n  getCachedData(key: string): any {\n    const cached = this.cache.get(key);\n    if (cached && Date.now() - cached.timestamp < this.cacheTimeout) {\n      return cached.data;\n    }\n    return null;\n  }\n\n  setCachedData(key: string, data: any): void {\n    this.cache.set(key, {\n      data,\n      timestamp: Date.now()\n    });\n  }\n\n  clearCache(): void {\n    this.cache.clear();\n  }\n}\n\nconst plantApiService = new PlantApiService();\nexport default plantApiService;\n","import plantApiService from './plantApiService';\nimport { PlantDetails } from '../types/plant';\n\n// Enhanced plant information fetcher with multiple API sources\nexport async function fetchPlantInfo(plantLabel: string, capturedImage: string | null = null): Promise<PlantDetails | null> {\n  try {\n    // If we have a captured image, use it for better identification\n    if (capturedImage) {\n      const result = await plantApiService.identifyPlant(capturedImage, plantLabel);\n      return result;\n    }\n    \n    // Otherwise, just get care information based on the label\n    const result = await plantApiService.getPlantCareInfo(plantLabel);\n    return result;\n    \n  } catch (error) {\n    console.error('Plant info fetch failed:', error);\n    \n    // Return fallback information\n    return plantApiService.getFallbackPlantInfo(plantLabel);\n  }\n}\n\n// Legacy function for backward compatibility\nexport async function fetchPlantInfoLegacy(plantLabel: string): Promise<PlantDetails | null> {\n  try {\n    // Try the old Trefle API approach as a fallback\n    const token = await getToken();\n    const response = await fetch(\n      `https://trefle.io/api/v1/plants?token=${token}&q=${encodeURIComponent(plantLabel)}`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    );\n    \n    if (!response.ok) {\n      throw new Error(`Trefle API error: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    \n    if (data.data && data.data.length > 0) {\n      const plant = data.data[0];\n      return {\n        label: plant.common_name || plant.scientific_name,\n        scientificName: plant.scientific_name,\n        confidence: 0.5,\n        description: `${plant.family_common_name || plant.family} family plant`,\n        family: plant.family,\n        genus: plant.genus,\n        image: plant.image_url,\n        source: 'Trefle'\n      };\n    }\n    \n    return null;\n  } catch (error) {\n    console.error('Trefle API failed:', error);\n    return null;\n  }\n}\n\nasync function getToken(): Promise<string> {\n  const params = {\n    origin: window.location.origin,\n    token: process.env.REACT_APP_TREFLE_TOKEN,\n  };\n  \n  try {\n    const response = await fetch(\"https://trefle.io/api/auth/claim\", {\n      method: \"POST\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    \n    if (!response.ok) {\n      throw new Error(`Token request failed: ${response.status}`);\n    }\n    \n    const { token } = await response.json();\n    return token;\n  } catch (error) {\n    console.error('Token generation failed:', error);\n    throw error;\n  }\n}\n","import React, { useEffect, useState } from \"react\";\nimport usePlantDetector from \"../../helpers/plantDetector\";\nimport \"./styles.css\";\nimport { fetchPlantInfo } from \"../../helpers/fetchPlantInfo\";\nimport LoadingSpinner from \"../common/LoadingSpinner\";\nimport { usePlantStore } from \"../../stores/plantStore\";\nimport { PlantDetails } from \"../../types/plant\";\n\ninterface DetectedPlantInfoProps {\n  capturedImage: string;\n  closeDialog: () => void;\n}\n\nconst DetectedPlantInfo: React.FC<DetectedPlantInfoProps> = ({ capturedImage, closeDialog }) => {\n  const { detect, ready, classifiers, loading, error, modelCount } = usePlantDetector();\n  const [plant, setPlant] = useState<PlantDetails | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [detectionError, setDetectionError] = useState<string | null>(null);\n  \n  const { \n    setCurrentPlant, \n    addToHistory, \n    setDetecting, \n    setDetectionProgress, \n    setDetectionStep,\n    preferences \n  } = usePlantStore();\n\n  useEffect(() => {\n    if (ready && capturedImage) {\n      (async () => {\n        try {\n          setIsLoading(true);\n          setDetectionError(null);\n          setDetecting(true);\n          setDetectionStep('Analyzing image with AI models...');\n          setDetectionProgress(10);\n          \n          // First, try ML5 detection\n          const mlResults = await detect(capturedImage, classifiers);\n          setDetectionProgress(40);\n          setDetectionStep('Identifying plant species...');\n          \n          let bestMlResult = null;\n          if (mlResults.length > 0) {\n            bestMlResult = mlResults[0]; // Already sorted by confidence\n          }\n          \n          setDetectionProgress(60);\n          setDetectionStep('Fetching detailed plant information...');\n          \n          // Then get detailed plant info using both ML result and image\n          const plantDetails = await fetchPlantInfo(\n            bestMlResult?.label || 'Unknown Plant',\n            capturedImage\n          );\n          \n          setDetectionProgress(90);\n          setDetectionStep('Finalizing results...');\n          \n          // Combine ML5 confidence with API result\n          if (plantDetails && bestMlResult) {\n            plantDetails.mlConfidence = bestMlResult.confidence;\n            plantDetails.mlModel = bestMlResult.model;\n            plantDetails.combinedConfidence = (\n              (bestMlResult.confidence + (plantDetails.confidence || 0)) / 2\n            );\n          }\n          \n          setPlant(plantDetails);\n          setCurrentPlant(plantDetails);\n          setDetectionProgress(100);\n          \n          // Auto-save to history if enabled\n          if (preferences.autoSave && plantDetails) {\n            addToHistory(plantDetails, capturedImage);\n          }\n          \n        } catch (err) {\n          console.error('Plant detection failed:', err);\n          setDetectionError(err instanceof Error ? err.message : 'Detection failed');\n          \n          // Try to get fallback info\n          try {\n            const fallbackInfo = await fetchPlantInfo('Unknown Plant');\n            setPlant(fallbackInfo);\n            setCurrentPlant(fallbackInfo);\n          } catch (fallbackErr) {\n            console.error('Fallback also failed:', fallbackErr);\n          }\n        } finally {\n          setIsLoading(false);\n          setDetecting(false);\n          setDetectionProgress(0);\n          setDetectionStep('');\n        }\n      })();\n    }\n  }, [ready, capturedImage, detect, classifiers, setCurrentPlant, addToHistory, preferences.autoSave, setDetecting, setDetectionProgress, setDetectionStep]);\n\n  const { detectionState } = usePlantStore();\n\n  // Loading state\n  if (loading || isLoading) {\n    return (\n      <div className=\"plant-info-dialog\">\n        <div className=\"plant-info-card\">\n          <span className=\"plant-info-dialog-close\" onClick={closeDialog}>\n            ×\n          </span>\n          <LoadingSpinner\n            size=\"large\"\n            message={loading ? 'Loading AI models...' : 'Analyzing Plant...'}\n            progress={detectionState.progress}\n            step={detectionState.currentStep}\n          />\n          {modelCount > 0 && (\n            <p className=\"model-info\">Using {modelCount} AI model{modelCount > 1 ? 's' : ''}</p>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error || detectionError) {\n    return (\n      <div className=\"plant-info-dialog\">\n        <div className=\"plant-info-card\">\n          <span className=\"plant-info-dialog-close\" onClick={closeDialog}>\n            ×\n          </span>\n          <h2>Detection Error</h2>\n          <p>We encountered an issue while analyzing your plant:</p>\n          <p className=\"error-message\">{error || detectionError}</p>\n          <p>Please try again with a clearer image of the plant.</p>\n        </div>\n      </div>\n    );\n  }\n\n  // No plant detected\n  if (!plant) {\n    return (\n      <div className=\"plant-info-dialog\">\n        <div className=\"plant-info-card\">\n          <span className=\"plant-info-dialog-close\" onClick={closeDialog}>\n            ×\n          </span>\n          <h2>Plant Not Detected</h2>\n          <p>We couldn't identify a plant in this image.</p>\n          <p>Please try again with:</p>\n          <ul>\n            <li>A clearer image of the plant</li>\n            <li>Better lighting conditions</li>\n            <li>Focus on leaves, flowers, or distinctive features</li>\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"plant-info-dialog\">\n      <div className=\"plant-info-card\">\n        <span className=\"plant-info-dialog-close\" onClick={closeDialog}>\n          ×\n        </span>\n        \n        {/* Plant identification header */}\n        <div className=\"plant-header\">\n          <h2 className=\"plant-name\">{plant.label}</h2>\n          {plant.scientificName && (\n            <p className=\"plant-scientific\">\n              <em>{plant.scientificName}</em>\n            </p>\n          )}\n          \n          {/* Confidence and source info */}\n          <div className=\"confidence-info\">\n            {plant.combinedConfidence && (\n              <span className=\"confidence-badge\">\n                {Math.round(plant.combinedConfidence * 100)}% confident\n              </span>\n            )}\n            {plant.source && (\n              <span className=\"source-badge\">\n                via {plant.source}\n              </span>\n            )}\n            {plant.mlModel && (\n              <span className=\"model-badge\">\n                {plant.mlModel}\n              </span>\n            )}\n          </div>\n        </div>\n\n        {/* Plant image */}\n        {plant.image && (\n          <div className=\"plant-image-container\">\n            <img\n              className=\"plant-image\"\n              src={plant.image}\n              alt={plant.label}\n              onError={(e) => {\n                const target = e.target as HTMLImageElement;\n                target.style.display = 'none';\n              }}\n            />\n          </div>\n        )}\n\n        {/* Plant description */}\n        {plant.description && (\n          <div className=\"plant-section\">\n            <h3>Description</h3>\n            <p className=\"plant-description\">{plant.description}</p>\n          </div>\n        )}\n\n        {/* Care information */}\n        <div className=\"care-info\">\n          {plant.light && (\n            <div className=\"care-item\">\n              <strong>💡 Light:</strong> {plant.light}\n            </div>\n          )}\n          {(plant.water || plant.watering) && (\n            <div className=\"care-item\">\n              <strong>💧 Water:</strong> {plant.water || plant.watering}\n            </div>\n          )}\n          {plant.care?.maintenance && (\n            <div className=\"care-item\">\n              <strong>🔧 Maintenance:</strong> {plant.care.maintenance}\n            </div>\n          )}\n          {plant.care?.hardiness && (\n            <div className=\"care-item\">\n              <strong>🌡️ Hardiness:</strong> {plant.care.hardiness}\n            </div>\n          )}\n        </div>\n\n        {/* Additional information */}\n        {(plant.family || plant.genus) && (\n          <div className=\"plant-section\">\n            <h3>Taxonomy</h3>\n            {plant.family && <p><strong>Family:</strong> {plant.family}</p>}\n            {plant.genus && <p><strong>Genus:</strong> {plant.genus}</p>}\n          </div>\n        )}\n\n        {plant.commonNames && plant.commonNames.length > 1 && (\n          <div className=\"plant-section\">\n            <h3>Common Names</h3>\n            <p>{plant.commonNames.join(', ')}</p>\n          </div>\n        )}\n\n        {plant.uses && (\n          <div className=\"plant-section\">\n            <h3>Uses</h3>\n            <p>{plant.uses}</p>\n          </div>\n        )}\n\n        {plant.edibleParts && plant.edibleParts.length > 0 && (\n          <div className=\"plant-section\">\n            <h3>⚠️ Edible Parts</h3>\n            <p>{plant.edibleParts.join(', ')}</p>\n            <p className=\"warning\">\n              <small>Always verify plant identification before consumption!</small>\n            </p>\n          </div>\n        )}\n\n        {/* Propagation info */}\n        {plant.propagation && plant.propagation.length > 0 && (\n          <div className=\"plant-section\">\n            <h3>Propagation</h3>\n            <p>{plant.propagation.join(', ')}</p>\n          </div>\n        )}\n\n        {/* Debug info for development */}\n        {process.env.NODE_ENV === 'development' && (\n          <details className=\"debug-info\">\n            <summary>Debug Information</summary>\n            <pre>{JSON.stringify(plant, null, 2)}</pre>\n          </details>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default DetectedPlantInfo;\n","import React, { FC, useCallback, useEffect } from \"react\";\nimport \"./AlertBox.css\";\n\nexport interface AlertBoxProps {\n  type?: \"success\" | \"error\" | \"warning\" | \"info\";\n  title?: string;\n  message: string;\n  onClose?: () => void;\n  closable?: boolean;\n  autoClose?: boolean;\n  autoCloseDelay?: number;\n  className?: string;\n}\n\nconst AlertBox: FC<AlertBoxProps> = ({\n  type = \"info\",\n  title,\n  message,\n  onClose,\n  closable = true,\n  autoClose = false,\n  autoCloseDelay = 5000,\n  className = \"\",\n}) => {\n  const [isVisible, setIsVisible] = React.useState(true);\n\n  const handleClose = useCallback(() => {\n    setIsVisible(false);\n    setTimeout(() => {\n      onClose?.();\n    }, 300); // Wait for animation to complete\n  }, [onClose]);\n\n  useEffect(() => {\n    if (autoClose && onClose) {\n      const timer = setTimeout(() => {\n        handleClose();\n      }, autoCloseDelay);\n\n      return () => clearTimeout(timer);\n    }\n  }, [autoClose, autoCloseDelay, onClose, handleClose]);\n\n  if (!isVisible) {\n    return null;\n  }\n\n  const getIcon = () => {\n    switch (type) {\n      case \"success\":\n        return \"✅\";\n      case \"error\":\n        return \"❌\";\n      case \"warning\":\n        return \"⚠️\";\n      case \"info\":\n      default:\n        return \"ℹ️\";\n    }\n  };\n\n  return (\n    <div className={`alert-box alert-${type} ${className}`}>\n      <div className=\"alert-content\">\n        <div className=\"alert-icon\">{getIcon()}</div>\n        <div className=\"alert-text\">\n          {title && <div className=\"alert-title\">{title}</div>}\n          <div className=\"alert-message\">{message}</div>\n        </div>\n        {closable && (\n          <button\n            className=\"alert-close\"\n            onClick={handleClose}\n            aria-label=\"Close alert\"\n          >\n            ×\n          </button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AlertBox;\n","import React, {\n  useEffect,\n  useState,\n  useRef,\n  useCallback,\n  useMemo,\n} from \"react\";\nimport Webcam from \"../../helpers/WebCam\";\nimport \"./styles.css\";\nimport DetectedPlantInfo from \"../../components/DetectedPlantInfo\";\nimport LoadingSpinner from \"../common/LoadingSpinner\";\nimport OptimizedImage from \"../common/OptimizedImage\";\nimport {\n  useCurrentPlant,\n  useAutoSavePreference,\n  usePlantActions,\n  useCameraActions,\n} from \"../../stores/plantStore\";\nimport AlertBox from \"../common/AlertBox\";\n\ninterface CanvasProps {\n  offline: boolean;\n}\n\nconst Canvas: React.FC<CanvasProps> = React.memo(({ offline }) => {\n  const [capturedImage, setCapturedImage] = useState<string | null>(null);\n  const [captured, setCaptured] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [showDetectedPlantInfo, setShowDetectedPlantInfo] = useState(false);\n  const [alertMessage, setAlertMessage] = useState<string | null>(null);\n\n  const currentPlant = useCurrentPlant();\n  const autoSave = useAutoSavePreference();\n  const { addToHistory, setCurrentPlant } = usePlantActions();\n  const { setCameraActive, setCameraError } = useCameraActions();\n\n  const webcamRef = useRef<HTMLVideoElement>(null);\n  const webcam = useRef<Webcam | null>(null);\n\n  const closeAlert = useCallback(() => {\n    setAlertMessage(null);\n  }, []);\n\n  const captureImage = useCallback(async () => {\n    if (!webcam.current) return;\n\n    try {\n      const capturedData = webcam.current.takeBase64Photo({\n        type: \"jpeg\",\n        quality: 2,\n      });\n      setCaptured(true);\n      setCapturedImage(capturedData.base64);\n\n      // Auto-save to history if enabled\n      if (autoSave && currentPlant) {\n        addToHistory(currentPlant, capturedData.base64);\n      }\n    } catch (error) {\n      console.error(\"Failed to capture image:\", error);\n      setCameraError(\"Failed to capture image. Please try again.\");\n    }\n  }, [autoSave, currentPlant, addToHistory, setCameraError]);\n\n  const discardImage = useCallback(() => {\n    setCaptured(false);\n    setCapturedImage(null);\n    setCurrentPlant(null);\n  }, [setCurrentPlant]);\n\n  const checkUploadStatus = useCallback(\n    (data: { status: number }) => {\n      setUploading(false);\n      if (data.status === 200) {\n        // Save to history when uploading\n        if (currentPlant && capturedImage) {\n          addToHistory(currentPlant, capturedImage);\n        }\n        setAlertMessage(\"Plant saved to your collection!\");\n        discardImage();\n      } else {\n        setAlertMessage(\"Sorry, we encountered an error saving your plant\");\n      }\n    },\n    [setUploading, discardImage, currentPlant, capturedImage, addToHistory]\n  );\n\n  const uploadImage = useCallback(() => {\n    if (!capturedImage) return;\n\n    if (offline) {\n      const prefix = \"cloudy_pwa_\";\n      const rs = Math.random().toString(36).substring(2, 5);\n      localStorage.setItem(`${prefix}${rs}`, capturedImage);\n      setAlertMessage(\n        \"Image saved locally, it will be uploaded to your library once internet connection is detected\"\n      );\n      discardImage();\n    } else {\n      setUploading(true);\n      // Simulating upload\n      checkUploadStatus({ status: 200 });\n    }\n  }, [capturedImage, offline, discardImage, checkUploadStatus]);\n\n  const findLocalItems = useCallback((query: RegExp) => {\n    const results: Array<{ key: string; val: string | null }> = [];\n    for (const i in localStorage) {\n      if (localStorage.hasOwnProperty(i)) {\n        if (i.match(query)) {\n          const value = localStorage.getItem(i);\n          localStorage.removeItem(i);\n          results.push({ key: i, val: value });\n        }\n      }\n    }\n    return results;\n  }, []);\n\n  const imageDisplay = useMemo(\n    () =>\n      capturedImage ? (\n        <OptimizedImage\n          src={capturedImage}\n          alt=\"captured plant\"\n          width=\"350\"\n          height=\"275\"\n          quality={0.7}\n          loading=\"eager\"\n        />\n      ) : null,\n    [capturedImage]\n  );\n\n  const updateShowDetectedPlantInfo = useCallback(\n    (show: boolean) => () => {\n      setShowDetectedPlantInfo(show);\n    },\n    []\n  );\n\n  const buttons = useMemo(() => {\n    return captured ? (\n      <div className=\"button-group\">\n        <button className=\"discardButton\" onClick={discardImage}>\n          Discard Plant\n        </button>\n        <button className=\"captureButton\" onClick={captureImage}>\n          Scan Another\n        </button>\n        <button className=\"uploadButton\" onClick={uploadImage}>\n          💾 Save Plant\n        </button>\n        <button\n          className=\"infoButton\"\n          onClick={updateShowDetectedPlantInfo(true)}\n        >\n          Show Plant Info\n        </button>\n      </div>\n    ) : (\n      <button className=\"captureButton\" onClick={captureImage}>\n        Scan Plant\n      </button>\n    );\n  }, [\n    captured,\n    discardImage,\n    captureImage,\n    uploadImage,\n    updateShowDetectedPlantInfo,\n  ]);\n\n  const uploadingMessage = useMemo(\n    () =>\n      uploading ? (\n        <LoadingSpinner\n          message=\"Saving plant to your collection...\"\n          size=\"small\"\n        />\n      ) : null,\n    [uploading]\n  );\n\n  useEffect(() => {\n    // Initialize the camera\n    const canvasElement = document.createElement(\"canvas\");\n    if (webcamRef.current) {\n      webcam.current = new Webcam(webcamRef.current, canvasElement);\n\n      webcam.current\n        .setup()\n        .then(() => {\n          setCameraActive(true);\n          setCameraError(null);\n        })\n        .catch((error) => {\n          console.error(\"Camera setup failed:\", error);\n          setCameraError(\n            \"Error getting access to your camera. Please check permissions.\"\n          );\n          setCameraActive(false);\n        });\n    }\n  }, [setCameraActive, setCameraError]);\n\n  useEffect(() => {\n    const batchUploads = () => {\n      const images = findLocalItems(/^cloudy_pwa_/);\n      let error = false;\n      if (images.length > 0) {\n        setUploading(true);\n        images.forEach((image) => {\n          // Simulating upload\n          checkUploadStatus({ status: 200 });\n        });\n        setUploading(false);\n        if (!error) {\n          setAlertMessage(\n            \"All saved images have been uploaded to your Library\"\n          );\n        }\n      }\n    };\n    if (!offline) {\n      batchUploads();\n    }\n  }, [offline, checkUploadStatus, findLocalItems]);\n\n  return (\n    <div className=\"uploadCanvas\">\n      <div className=\"mediaGroup\">\n        <video\n          autoPlay\n          playsInline\n          muted\n          ref={webcamRef}\n          width=\"100vw\"\n          height=\"275\"\n        />\n        {imageDisplay && (\n          <figure className=\"imageCanvas\">\n            {imageDisplay}\n            <figcaption>Image captured from feed.</figcaption>\n          </figure>\n        )}\n      </div>\n      {buttons}\n      {uploadingMessage}\n      {showDetectedPlantInfo && capturedImage && (\n        <DetectedPlantInfo\n          capturedImage={capturedImage}\n          closeDialog={updateShowDetectedPlantInfo(false)}\n        />\n      )}\n      {alertMessage && (\n        <AlertBox\n          type=\"info\"\n          message={alertMessage}\n          onClose={closeAlert}\n        />\n      )}\n    </div>\n  );\n});\n\nCanvas.displayName = \"Canvas\";\n\nexport default Canvas;\n","import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport './OptimizedImage.css';\n\ninterface OptimizedImageProps {\n  src: string;\n  alt: string;\n  width?: number | string;\n  height?: number | string;\n  className?: string;\n  onClick?: () => void;\n  placeholder?: string;\n  quality?: number;\n  loading?: 'lazy' | 'eager';\n}\n\nconst OptimizedImage: React.FC<OptimizedImageProps> = React.memo(({\n  src,\n  alt,\n  width,\n  height,\n  className = '',\n  onClick,\n  placeholder = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzUwIiBoZWlnaHQ9IjI3NSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvYWRpbmcuLi48L3RleHQ+PC9zdmc+',\n  quality = 0.8,\n  loading = 'lazy'\n}) => {\n  const [imageSrc, setImageSrc] = useState<string>(placeholder);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isInView, setIsInView] = useState(loading === 'eager');\n  const [hasError, setHasError] = useState(false);\n  const imgRef = useRef<HTMLImageElement>(null);\n  const observerRef = useRef<IntersectionObserver | null>(null);\n\n  // Compress image if it's a base64 string\n  const compressImage = useCallback((base64: string, quality: number): Promise<string> => {\n    return new Promise((resolve) => {\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      const img = new Image();\n      \n      img.onload = () => {\n        // Calculate new dimensions (max 800px width)\n        const maxWidth = 800;\n        const ratio = Math.min(maxWidth / img.width, maxWidth / img.height);\n        canvas.width = img.width * ratio;\n        canvas.height = img.height * ratio;\n        \n        // Draw and compress\n        ctx?.drawImage(img, 0, 0, canvas.width, canvas.height);\n        const compressedBase64 = canvas.toDataURL('image/jpeg', quality);\n        resolve(compressedBase64);\n      };\n      \n      img.src = base64;\n    });\n  }, []);\n\n  // Intersection Observer for lazy loading\n  useEffect(() => {\n    if (loading === 'eager' || isInView) return;\n\n    observerRef.current = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsInView(true);\n          observerRef.current?.disconnect();\n        }\n      },\n      { threshold: 0.1, rootMargin: '50px' }\n    );\n\n    if (imgRef.current) {\n      observerRef.current.observe(imgRef.current);\n    }\n\n    return () => {\n      observerRef.current?.disconnect();\n    };\n  }, [loading, isInView]);\n\n  // Load and compress image when in view\n  useEffect(() => {\n    if (!isInView) return;\n\n    const loadImage = async () => {\n      try {\n        setIsLoaded(false);\n        setHasError(false);\n\n        // If it's a base64 image, compress it\n        if (src.startsWith('data:image/')) {\n          const compressedSrc = await compressImage(src, quality);\n          setImageSrc(compressedSrc);\n        } else {\n          setImageSrc(src);\n        }\n        \n        setIsLoaded(true);\n      } catch (error) {\n        console.error('Failed to load image:', error);\n        setHasError(true);\n        setImageSrc(placeholder);\n      }\n    };\n\n    loadImage();\n  }, [src, isInView, compressImage, quality, placeholder]);\n\n  const handleImageLoad = useCallback(() => {\n    setIsLoaded(true);\n  }, []);\n\n  const handleImageError = useCallback(() => {\n    setHasError(true);\n    setImageSrc(placeholder);\n  }, [placeholder]);\n\n  return (\n    <div \n      className={`optimized-image-container ${className} ${isLoaded ? 'loaded' : 'loading'} ${hasError ? 'error' : ''}`}\n      style={{ width, height }}\n      onClick={onClick}\n    >\n      <img\n        ref={imgRef}\n        src={imageSrc}\n        alt={alt}\n        className=\"optimized-image\"\n        onLoad={handleImageLoad}\n        onError={handleImageError}\n        loading={loading}\n        style={{ \n          width: '100%', \n          height: '100%', \n          objectFit: 'cover',\n          transition: 'opacity 0.3s ease-in-out'\n        }}\n      />\n      {!isLoaded && !hasError && (\n        <div className=\"image-loading-overlay\">\n          <div className=\"loading-spinner\" />\n        </div>\n      )}\n      {hasError && (\n        <div className=\"image-error-overlay\">\n          <span>⚠️</span>\n          <p>Failed to load image</p>\n        </div>\n      )}\n    </div>\n  );\n});\n\nOptimizedImage.displayName = 'OptimizedImage';\n\nexport default OptimizedImage;\n"],"names":["constructor","webcamElement","canvasElement","_this","adjustVideoSize","width","height","aspectRatio","this","setup","async","Promise","resolve","reject","undefined","navigator","mediaDevices","getUserMedia","audio","video","facingMode","then","mediaStream","srcObject","src","window","URL","createObjectURL","addEventListener","videoWidth","videoHeight","_drawImage","imageWidth","imageHeight","context","getContext","Error","drawImage","takeBlobPhoto","toBlob","blob","takeBase64Photo","type","quality","arguments","length","base64","toDataURL","ml5","detect","classifiers","img","Image","decode","processedCanvas","imageElement","canvas","document","createElement","ctx","imageData","getImageData","data","i","Math","min","avgR","avgG","avgB","putImageData","preprocessImage","results","mobilenet","mobileNetResults","classify","push","map","r","_objectSpread","model","error","console","warn","densenet","denseNetResults","plantKeywords","plantResults","filter","result","some","keyword","label","toLowerCase","includes","sort","a","b","confidence","usePlantDetector","setClassifiers","useState","loading","setLoading","setError","useEffect","imageClassifier","denseNetError","err","message","initializeModels","ready","modelCount","Object","values","Boolean","apiKeys","baseUrls","cache","cacheTimeout","plantId","process","REACT_APP_PLANT_ID_API_KEY","perenual","REACT_APP_PERENUAL_API_KEY","plantNet","REACT_APP_PLANTNET_API_KEY","trefle","Map","base64ToBlob","base64String","byteCharacters","atob","split","byteNumbers","Array","charCodeAt","byteArray","Uint8Array","Blob","identifyWithPlantId","base64Image","formData","FormData","append","JSON","stringify","response","fetch","concat","method","headers","body","ok","status","json","formatPlantIdResponse","getPlantCareInfo","plantName","getFallbackPlantInfo","cacheKey","cached","getCachedData","searchResponse","encodeURIComponent","searchData","id","detailResponse","detailData","formatted","formatPerenualResponse","setCachedData","identifyWithPlantNet","formatPlantNetResponse","identifyPlant","plantLabel","plantIdResult","source","plantNetResult","careInfo","fromML","_plant$common_names","_plant$description","_plant$taxonomy","_plant$taxonomy2","_plant$watering","_plant$image","suggestions","suggestion","plant","plant_details","common_names","scientific_name","scientificName","probability","description","value","commonNames","family","taxonomy","genus","watering","max","light","propagation","propagation_methods","edibleParts","edible_parts","image","gbifId","gbif_id","inaturalistId","inaturalist_id","synonyms","_species$commonNames","_result$images","species","scientificNameWithoutAuthor","score","images","url","o","_data$scientific_name","_data$scientific_name2","_data$sunlight","_data$hardiness","_data$hardiness2","_data$dimension","_data$dimension2","_data$dimension3","_data$default_image","common_name","sunlight","join","care","hardiness","maintenance","growthRate","growth_rate","droughtTolerant","drought_tolerant","saltTolerant","salt_tolerant","thorny","invasive","tropical","indoor","careLevel","care_level","dimensions","minHeight","dimension","min_value","maxHeight","max_value","unit","default_image","original_url","cycle","attracts","pruningMonth","pruning_month","pruningCount","pruning_count","seeds","flowers","flowering_season","color","flower_color","soilRequirements","soil","fallbackData","uses","normalizedName","replace","key","entries","get","Date","now","timestamp","set","clearCache","clear","fetchPlantInfo","capturedImage","plantApiService","_ref","_plant$care","_plant$care2","closeDialog","setPlant","isLoading","setIsLoading","detectionError","setDetectionError","setCurrentPlant","addToHistory","setDetecting","setDetectionProgress","setDetectionStep","preferences","usePlantStore","_bestMlResult","mlResults","bestMlResult","plantDetails","mlConfidence","mlModel","combinedConfidence","autoSave","fallbackInfo","fallbackErr","detectionState","_jsx","className","children","_jsxs","onClick","LoadingSpinner","size","progress","step","currentStep","round","alt","onError","e","target","style","display","water","title","onClose","closable","autoClose","autoCloseDelay","isVisible","setIsVisible","React","handleClose","useCallback","setTimeout","timer","clearTimeout","getIcon","Canvas","offline","setCapturedImage","captured","setCaptured","uploading","setUploading","showDetectedPlantInfo","setShowDetectedPlantInfo","alertMessage","setAlertMessage","currentPlant","useCurrentPlant","useAutoSavePreference","usePlantActions","setCameraActive","setCameraError","useCameraActions","webcamRef","useRef","webcam","closeAlert","captureImage","current","capturedData","discardImage","checkUploadStatus","uploadImage","prefix","rs","random","toString","substring","localStorage","setItem","findLocalItems","query","hasOwnProperty","match","getItem","removeItem","val","imageDisplay","useMemo","OptimizedImage","updateShowDetectedPlantInfo","show","buttons","uploadingMessage","Webcam","catch","batchUploads","forEach","autoPlay","playsInline","muted","ref","DetectedPlantInfo","AlertBox","displayName","placeholder","imageSrc","setImageSrc","isLoaded","setIsLoaded","isInView","setIsInView","hasError","setHasError","imgRef","observerRef","compressImage","onload","ratio","compressedBase64","IntersectionObserver","_ref2","entry","_observerRef$current","isIntersecting","disconnect","threshold","rootMargin","observe","_observerRef$current2","startsWith","compressedSrc","loadImage","handleImageLoad","handleImageError","onLoad","objectFit","transition"],"sourceRoot":""}