{"version":3,"file":"static/js/867.4a55669b.chunk.js","mappings":"sIAeA,MAAMA,EAAgDC,EAAAA,KAAWC,IAU1D,IAV2D,IAChEC,EAAG,IACHC,EAAG,MACHC,EAAK,OACLC,EAAM,UACNC,EAAY,GAAE,QACdC,EAAO,YACPC,EAAc,yVAAwV,QACtWC,EAAU,GAAG,QACbC,EAAU,QACXT,EACC,MAAOU,EAAUC,IAAeC,EAAAA,EAAAA,UAAiBL,IAC1CM,EAAUC,IAAeF,EAAAA,EAAAA,WAAS,IAClCG,EAAUC,IAAeJ,EAAAA,EAAAA,UAAqB,UAAZH,IAClCQ,EAAUC,IAAeN,EAAAA,EAAAA,WAAS,GACnCO,GAASC,EAAAA,EAAAA,QAAyB,MAClCC,GAAcD,EAAAA,EAAAA,QAAoC,MAGlDE,GAAgBC,EAAAA,EAAAA,aAAY,CAACC,EAAgBhB,IAC1C,IAAIiB,QAASC,IAClB,MAAMC,EAASC,SAASC,cAAc,UAChCC,EAAMH,EAAOI,WAAW,MACxBC,EAAM,IAAIC,MAEhBD,EAAIE,OAAS,KAEX,MACMC,EAAQC,KAAKC,IADF,IACiBL,EAAI7B,MADrB,IACuC6B,EAAI5B,QAC5DuB,EAAOxB,MAAQ6B,EAAI7B,MAAQgC,EAC3BR,EAAOvB,OAAS4B,EAAI5B,OAAS+B,EAG1B,OAAHL,QAAG,IAAHA,GAAAA,EAAKQ,UAAUN,EAAK,EAAG,EAAGL,EAAOxB,MAAOwB,EAAOvB,QAC/C,MAAMmC,EAAmBZ,EAAOa,UAAU,aAAchC,GACxDkB,EAAQa,IAGVP,EAAI/B,IAAMuB,IAEX,KAGHiB,EAAAA,EAAAA,WAAU,KACR,GAAgB,UAAZhC,IAAuBM,EAgB3B,OAdAM,EAAYqB,QAAU,IAAIC,qBACxBC,IAAc,IAAZC,GAAMD,EACqB,IAADE,EAAtBD,EAAME,iBACR/B,GAAY,GACO,QAAnB8B,EAAAzB,EAAYqB,eAAO,IAAAI,GAAnBA,EAAqBE,eAGzB,CAAEC,UAAW,GAAKC,WAAY,SAG5B/B,EAAOuB,SACTrB,EAAYqB,QAAQS,QAAQhC,EAAOuB,SAG9B,KAAO,IAADU,EACQ,QAAnBA,EAAA/B,EAAYqB,eAAO,IAAAU,GAAnBA,EAAqBJ,eAEtB,CAACvC,EAASM,KAGb0B,EAAAA,EAAAA,WAAU,KACR,IAAK1B,EAAU,OAEGsC,WAChB,IAKE,GAJAvC,GAAY,GACZI,GAAY,GAGRjB,EAAIqD,WAAW,eAAgB,CACjC,MAAMC,QAAsBjC,EAAcrB,EAAKO,GAC/CG,EAAY4C,EACd,MACE5C,EAAYV,GAGda,GAAY,EACd,CAAE,MAAO0C,GACPC,QAAQD,MAAM,wBAAyBA,GACvCtC,GAAY,GACZP,EAAYJ,EACd,GAGFmD,IACC,CAACzD,EAAKc,EAAUO,EAAed,EAASD,IAE3C,MAAMoD,GAAkBpC,EAAAA,EAAAA,aAAY,KAClCT,GAAY,IACX,IAEG8C,GAAmBrC,EAAAA,EAAAA,aAAY,KACnCL,GAAY,GACZP,EAAYJ,IACX,CAACA,IAEJ,OACEsD,EAAAA,EAAAA,MAAA,OACExD,UAAS,6BAAAyD,OAA+BzD,EAAS,KAAAyD,OAAIjD,EAAW,SAAW,UAAS,KAAAiD,OAAI7C,EAAW,QAAU,IAC7G8C,MAAO,CAAE5D,QAAOC,UAChBE,QAASA,EAAQ0D,SAAA,EAEjBC,EAAAA,EAAAA,KAAA,OACEC,IAAK/C,EACLlB,IAAKS,EACLR,IAAKA,EACLG,UAAU,kBACV8D,OAAQR,EACRS,QAASR,EACTnD,QAASA,EACTsD,MAAO,CACL5D,MAAO,OACPC,OAAQ,OACRiE,UAAW,QACXC,WAAY,+BAGdzD,IAAaI,IACbgD,EAAAA,EAAAA,KAAA,OAAK5D,UAAU,wBAAuB2D,UACpCC,EAAAA,EAAAA,KAAA,OAAK5D,UAAU,sBAGlBY,IACC4C,EAAAA,EAAAA,MAAA,OAAKxD,UAAU,sBAAqB2D,SAAA,EAClCC,EAAAA,EAAAA,KAAA,QAAAD,SAAM,kBACNC,EAAAA,EAAAA,KAAA,KAAAD,SAAG,iCAOblE,EAAeyE,YAAc,iBAE7B,S,oFChJA,MAAMC,EAA4CzE,EAAAA,KAAWC,IAAiC,IAAhC,QAAEyE,EAAO,cAAEC,GAAe1E,EACtF,MAAM,aAAE2E,EAAY,kBAAEC,EAAiB,eAAEC,EAAc,eAAEC,IAAmBC,EAAAA,EAAAA,OACrEC,EAAQC,IAAarE,EAAAA,EAAAA,UAA8B,QACnDsE,EAAYC,IAAiBvE,EAAAA,EAAAA,UAAS,KACtCwE,EAAaC,IAAkBzE,EAAAA,EAAAA,UAAwB,OACvD0E,EAAUC,IAAe3E,EAAAA,EAAAA,UAAS,IAEnC4E,GAAkBC,EAAAA,EAAAA,SAAQ,IAC9Bd,EAAaK,OAAQU,IACnB,MAAMC,EAA2B,QAAXX,GAAgC,cAAXA,GAA0BU,EAAKE,WACpEC,EAA+B,KAAfX,GACpBQ,EAAKI,MAAMC,MAAMC,cAAcC,SAASf,EAAWc,gBAClDN,EAAKI,MAAMI,gBAAkBR,EAAKI,MAAMI,eAAeF,cAAcC,SAASf,EAAWc,eAE5F,OAAOL,GAAiBE,IAE1B,CAAClB,EAAcK,EAAQE,IAGnBiB,GAAgB5E,EAAAA,EAAAA,aAAa6E,IACjCtB,EAAesB,EAAId,GACnBD,EAAe,MACfE,EAAY,KACX,CAACT,EAAgBQ,IAEde,GAAmB9E,EAAAA,EAAAA,aAAamE,IACpCL,EAAeK,EAAKU,IACpBb,EAAYG,EAAKY,OAAS,KACzB,IAEGC,GAAahF,EAAAA,EAAAA,aAAaiF,GACvB,IAAIC,KAAKD,GAAWE,mBAAmB,QAAS,CACrDC,KAAM,UACNC,MAAO,QACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,YAET,IAEH,OACE9C,EAAAA,EAAAA,KAAA,OAAK5D,UAAU,wBAAuB2D,UACpCH,EAAAA,EAAAA,MAAA,OAAKxD,UAAU,sBAAqB2D,SAAA,EAClCH,EAAAA,EAAAA,MAAA,OAAKxD,UAAU,uBAAsB2D,SAAA,EACnCC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,gCACJC,EAAAA,EAAAA,KAAA,UAAQ5D,UAAU,eAAeC,QAASmE,EAAQT,SAAC,aAKrDH,EAAAA,EAAAA,MAAA,OAAKxD,UAAU,yBAAwB2D,SAAA,EACrCC,EAAAA,EAAAA,KAAA,OAAK5D,UAAU,mBAAkB2D,UAC/BC,EAAAA,EAAAA,KAAA,SACE+C,KAAK,OACLzG,YAAY,mBACZ0G,MAAO/B,EACPgC,SAAWC,GAAMhC,EAAcgC,EAAEC,OAAOH,OACxC5G,UAAU,oBAIdwD,EAAAA,EAAAA,MAAA,OAAKxD,UAAU,iBAAgB2D,SAAA,EAC7BH,EAAAA,EAAAA,MAAA,UACExD,UAAS,iBAAAyD,OAA8B,QAAXkB,EAAmB,SAAW,IAC1D1E,QAASA,IAAM2E,EAAU,OAAOjB,SAAA,CACjC,QACOW,EAAa0C,OAAO,QAE5BxD,EAAAA,EAAAA,MAAA,UACExD,UAAS,iBAAAyD,OAA8B,cAAXkB,EAAyB,SAAW,IAChE1E,QAASA,IAAM2E,EAAU,aAAajB,SAAA,CACvC,cACaW,EAAaK,OAAOU,GAAQA,EAAKE,YAAYyB,OAAO,cAKtEpD,EAAAA,EAAAA,KAAA,OAAK5D,UAAU,wBAAuB2D,SACR,IAA3BwB,EAAgB6B,QACfxD,EAAAA,EAAAA,MAAA,OAAKxD,UAAU,cAAa2D,SAAA,EAC1BC,EAAAA,EAAAA,KAAA,OAAK5D,UAAU,aAAY2D,SAAC,kBAC5BC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,qBACJC,EAAAA,EAAAA,KAAA,KAAAD,SACGkB,EAAU,oBAAApB,OACaoB,EAAU,KACnB,cAAXF,EACE,uCACA,wDAKVf,EAAAA,EAAAA,KAAA,OAAK5D,UAAU,eAAc2D,SAC1BwB,EAAgB8B,IAAK5B,IACpB7B,EAAAA,EAAAA,MAAA,OAAmBxD,UAAU,eAAc2D,SAAA,EACzCH,EAAAA,EAAAA,MAAA,OAAKxD,UAAU,uBAAsB2D,SAAA,EACnCC,EAAAA,EAAAA,KAACnE,EAAAA,EAAc,CACbG,IAAKyF,EAAK6B,cACVrH,IAAKwF,EAAKI,MAAMC,MAChB1F,UAAU,aACVI,QAAQ,OACRD,QAAS,GACTF,QAASA,IAAmB,OAAboE,QAAa,IAAbA,OAAa,EAAbA,EAAgBgB,MAEjC7B,EAAAA,EAAAA,MAAA,OAAKxD,UAAU,eAAc2D,SAAA,EAC3BC,EAAAA,EAAAA,KAAA,UACE5D,UAAS,mBAAAyD,OAAqB4B,EAAKE,WAAa,YAAc,IAC9DtF,QAASA,IAAMuE,EAAea,EAAKU,IACnCoB,MAAO9B,EAAKE,WAAa,wBAA0B,mBAAmB5B,SAErE0B,EAAKE,WAAa,eAAO,kBAE5B3B,EAAAA,EAAAA,KAAA,UACE5D,UAAU,gBACVC,QAASA,IAAMsE,EAAkBc,EAAKU,IACtCoB,MAAM,sBAAqBxD,SAC5B,8BAMLH,EAAAA,EAAAA,MAAA,OAAKxD,UAAU,eAAc2D,SAAA,EAC3BC,EAAAA,EAAAA,KAAA,MAAI5D,UAAU,aAAY2D,SAAE0B,EAAKI,MAAMC,QACtCL,EAAKI,MAAMI,iBACVjC,EAAAA,EAAAA,KAAA,KAAG5D,UAAU,kBAAiB2D,UAC5BC,EAAAA,EAAAA,KAAA,MAAAD,SAAK0B,EAAKI,MAAMI,oBAIpBrC,EAAAA,EAAAA,MAAA,OAAKxD,UAAU,aAAY2D,SAAA,EACzBC,EAAAA,EAAAA,KAAA,QAAM5D,UAAU,aAAY2D,SACzB0B,EAAKI,MAAM2B,WAAU,GAAA3D,OACf1B,KAAKsF,MAA8B,IAAxBhC,EAAKI,MAAM2B,YAAiB,eAC1C,wBAGN5D,EAAAA,EAAAA,MAAA,QAAMxD,UAAU,SAAQ2D,SAAA,CAAC,OAAK0B,EAAKI,MAAM6B,cAG3C1D,EAAAA,EAAAA,KAAA,KAAG5D,UAAU,YAAW2D,SAAEuC,EAAWb,EAAKc,cAG1CvC,EAAAA,EAAAA,KAAA,OAAK5D,UAAU,gBAAe2D,SAC3BoB,IAAgBM,EAAKU,IACpBvC,EAAAA,EAAAA,MAAA,OAAKxD,UAAU,cAAa2D,SAAA,EAC1BC,EAAAA,EAAAA,KAAA,YACEgD,MAAO3B,EACP4B,SAAWC,GAAM5B,EAAY4B,EAAEC,OAAOH,OACtC1G,YAAY,qCACZF,UAAU,gBACVuH,KAAM,KAER/D,EAAAA,EAAAA,MAAA,OAAKxD,UAAU,eAAc2D,SAAA,EAC3BC,EAAAA,EAAAA,KAAA,UACE5D,UAAU,mBACVC,QAASA,IAAM6F,EAAcT,EAAKU,IAAIpC,SACvC,UAGDC,EAAAA,EAAAA,KAAA,UACE5D,UAAU,qBACVC,QAASA,KACP+E,EAAe,MACfE,EAAY,KACZvB,SACH,kBAMLH,EAAAA,EAAAA,MAAA,OAAKxD,UAAU,eAAc2D,SAAA,CAC1B0B,EAAKY,OACJrC,EAAAA,EAAAA,KAAA,KAAG5D,UAAU,YAAW2D,SAAE0B,EAAKY,SAE/BrC,EAAAA,EAAAA,KAAA,KAAG5D,UAAU,WAAU2D,SAAC,oBAE1BC,EAAAA,EAAAA,KAAA,UACE5D,UAAU,mBACVC,QAASA,IAAM+F,EAAiBX,GAAM1B,SAErC0B,EAAKY,MAAQ,YAAc,uBAxF9BZ,EAAKU,gBAwG/B5B,EAAaD,YAAc,eAE3B,S","sources":["components/common/OptimizedImage.tsx","components/plant/PlantHistory.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport './OptimizedImage.css';\n\ninterface OptimizedImageProps {\n  src: string;\n  alt: string;\n  width?: number | string;\n  height?: number | string;\n  className?: string;\n  onClick?: () => void;\n  placeholder?: string;\n  quality?: number;\n  loading?: 'lazy' | 'eager';\n}\n\nconst OptimizedImage: React.FC<OptimizedImageProps> = React.memo(({\n  src,\n  alt,\n  width,\n  height,\n  className = '',\n  onClick,\n  placeholder = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzUwIiBoZWlnaHQ9IjI3NSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvYWRpbmcuLi48L3RleHQ+PC9zdmc+',\n  quality = 0.8,\n  loading = 'lazy'\n}) => {\n  const [imageSrc, setImageSrc] = useState<string>(placeholder);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isInView, setIsInView] = useState(loading === 'eager');\n  const [hasError, setHasError] = useState(false);\n  const imgRef = useRef<HTMLImageElement>(null);\n  const observerRef = useRef<IntersectionObserver | null>(null);\n\n  // Compress image if it's a base64 string\n  const compressImage = useCallback((base64: string, quality: number): Promise<string> => {\n    return new Promise((resolve) => {\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      const img = new Image();\n      \n      img.onload = () => {\n        // Calculate new dimensions (max 800px width)\n        const maxWidth = 800;\n        const ratio = Math.min(maxWidth / img.width, maxWidth / img.height);\n        canvas.width = img.width * ratio;\n        canvas.height = img.height * ratio;\n        \n        // Draw and compress\n        ctx?.drawImage(img, 0, 0, canvas.width, canvas.height);\n        const compressedBase64 = canvas.toDataURL('image/jpeg', quality);\n        resolve(compressedBase64);\n      };\n      \n      img.src = base64;\n    });\n  }, []);\n\n  // Intersection Observer for lazy loading\n  useEffect(() => {\n    if (loading === 'eager' || isInView) return;\n\n    observerRef.current = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsInView(true);\n          observerRef.current?.disconnect();\n        }\n      },\n      { threshold: 0.1, rootMargin: '50px' }\n    );\n\n    if (imgRef.current) {\n      observerRef.current.observe(imgRef.current);\n    }\n\n    return () => {\n      observerRef.current?.disconnect();\n    };\n  }, [loading, isInView]);\n\n  // Load and compress image when in view\n  useEffect(() => {\n    if (!isInView) return;\n\n    const loadImage = async () => {\n      try {\n        setIsLoaded(false);\n        setHasError(false);\n\n        // If it's a base64 image, compress it\n        if (src.startsWith('data:image/')) {\n          const compressedSrc = await compressImage(src, quality);\n          setImageSrc(compressedSrc);\n        } else {\n          setImageSrc(src);\n        }\n        \n        setIsLoaded(true);\n      } catch (error) {\n        console.error('Failed to load image:', error);\n        setHasError(true);\n        setImageSrc(placeholder);\n      }\n    };\n\n    loadImage();\n  }, [src, isInView, compressImage, quality, placeholder]);\n\n  const handleImageLoad = useCallback(() => {\n    setIsLoaded(true);\n  }, []);\n\n  const handleImageError = useCallback(() => {\n    setHasError(true);\n    setImageSrc(placeholder);\n  }, [placeholder]);\n\n  return (\n    <div \n      className={`optimized-image-container ${className} ${isLoaded ? 'loaded' : 'loading'} ${hasError ? 'error' : ''}`}\n      style={{ width, height }}\n      onClick={onClick}\n    >\n      <img\n        ref={imgRef}\n        src={imageSrc}\n        alt={alt}\n        className=\"optimized-image\"\n        onLoad={handleImageLoad}\n        onError={handleImageError}\n        loading={loading}\n        style={{ \n          width: '100%', \n          height: '100%', \n          objectFit: 'cover',\n          transition: 'opacity 0.3s ease-in-out'\n        }}\n      />\n      {!isLoaded && !hasError && (\n        <div className=\"image-loading-overlay\">\n          <div className=\"loading-spinner\" />\n        </div>\n      )}\n      {hasError && (\n        <div className=\"image-error-overlay\">\n          <span>⚠️</span>\n          <p>Failed to load image</p>\n        </div>\n      )}\n    </div>\n  );\n});\n\nOptimizedImage.displayName = 'OptimizedImage';\n\nexport default OptimizedImage;\n","import React, { useState, useMemo, useCallback } from 'react';\nimport { usePlantStore } from '../../stores/plantStore';\nimport { PlantHistoryItem } from '../../types/plant';\nimport OptimizedImage from '../common/OptimizedImage';\nimport './PlantHistory.css';\n\ninterface PlantHistoryProps {\n  onClose: () => void;\n  onSelectPlant?: (plant: PlantHistoryItem) => void;\n}\n\nconst PlantHistory: React.FC<PlantHistoryProps> = React.memo(({ onClose, onSelectPlant }) => {\n  const { plantHistory, removeFromHistory, toggleFavorite, addNoteToPlant } = usePlantStore();\n  const [filter, setFilter] = useState<'all' | 'favorites'>('all');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [editingNote, setEditingNote] = useState<string | null>(null);\n  const [noteText, setNoteText] = useState('');\n\n  const filteredHistory = useMemo(() => \n    plantHistory.filter((item) => {\n      const matchesFilter = filter === 'all' || (filter === 'favorites' && item.isFavorite);\n      const matchesSearch = searchTerm === '' || \n        item.plant.label.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        (item.plant.scientificName && item.plant.scientificName.toLowerCase().includes(searchTerm.toLowerCase()));\n      \n      return matchesFilter && matchesSearch;\n    }), \n    [plantHistory, filter, searchTerm]\n  );\n\n  const handleAddNote = useCallback((id: string) => {\n    addNoteToPlant(id, noteText);\n    setEditingNote(null);\n    setNoteText('');\n  }, [addNoteToPlant, noteText]);\n\n  const startEditingNote = useCallback((item: PlantHistoryItem) => {\n    setEditingNote(item.id);\n    setNoteText(item.notes || '');\n  }, []);\n\n  const formatDate = useCallback((timestamp: number) => {\n    return new Date(timestamp).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  }, []);\n\n  return (\n    <div className=\"plant-history-overlay\">\n      <div className=\"plant-history-modal\">\n        <div className=\"plant-history-header\">\n          <h2>🌱 Plant History</h2>\n          <button className=\"close-button\" onClick={onClose}>\n            ×\n          </button>\n        </div>\n\n        <div className=\"plant-history-controls\">\n          <div className=\"search-container\">\n            <input\n              type=\"text\"\n              placeholder=\"Search plants...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"search-input\"\n            />\n          </div>\n          \n          <div className=\"filter-buttons\">\n            <button\n              className={`filter-button ${filter === 'all' ? 'active' : ''}`}\n              onClick={() => setFilter('all')}\n            >\n              All ({plantHistory.length})\n            </button>\n            <button\n              className={`filter-button ${filter === 'favorites' ? 'active' : ''}`}\n              onClick={() => setFilter('favorites')}\n            >\n              Favorites ({plantHistory.filter(item => item.isFavorite).length})\n            </button>\n          </div>\n        </div>\n\n        <div className=\"plant-history-content\">\n          {filteredHistory.length === 0 ? (\n            <div className=\"empty-state\">\n              <div className=\"empty-icon\">🔍</div>\n              <h3>No plants found</h3>\n              <p>\n                {searchTerm \n                  ? `No plants match \"${searchTerm}\"`\n                  : filter === 'favorites' \n                    ? \"You haven't favorited any plants yet\"\n                    : \"Start identifying plants to build your history!\"\n                }\n              </p>\n            </div>\n          ) : (\n            <div className=\"history-grid\">\n              {filteredHistory.map((item) => (\n                <div key={item.id} className=\"history-card\">\n                  <div className=\"card-image-container\">\n                    <OptimizedImage\n                      src={item.capturedImage}\n                      alt={item.plant.label}\n                      className=\"card-image\"\n                      loading=\"lazy\"\n                      quality={0.6}\n                      onClick={() => onSelectPlant?.(item)}\n                    />\n                    <div className=\"card-actions\">\n                      <button\n                        className={`favorite-button ${item.isFavorite ? 'favorited' : ''}`}\n                        onClick={() => toggleFavorite(item.id)}\n                        title={item.isFavorite ? 'Remove from favorites' : 'Add to favorites'}\n                      >\n                        {item.isFavorite ? '❤️' : '🤍'}\n                      </button>\n                      <button\n                        className=\"delete-button\"\n                        onClick={() => removeFromHistory(item.id)}\n                        title=\"Remove from history\"\n                      >\n                        🗑️\n                      </button>\n                    </div>\n                  </div>\n\n                  <div className=\"card-content\">\n                    <h3 className=\"plant-name\">{item.plant.label}</h3>\n                    {item.plant.scientificName && (\n                      <p className=\"scientific-name\">\n                        <em>{item.plant.scientificName}</em>\n                      </p>\n                    )}\n                    \n                    <div className=\"plant-meta\">\n                      <span className=\"confidence\">\n                        {item.plant.confidence \n                          ? `${Math.round(item.plant.confidence * 100)}% confident`\n                          : 'Confidence unknown'\n                        }\n                      </span>\n                      <span className=\"source\">via {item.plant.source}</span>\n                    </div>\n\n                    <p className=\"timestamp\">{formatDate(item.timestamp)}</p>\n\n                    {/* Notes section */}\n                    <div className=\"notes-section\">\n                      {editingNote === item.id ? (\n                        <div className=\"note-editor\">\n                          <textarea\n                            value={noteText}\n                            onChange={(e) => setNoteText(e.target.value)}\n                            placeholder=\"Add your notes about this plant...\"\n                            className=\"note-textarea\"\n                            rows={3}\n                          />\n                          <div className=\"note-actions\">\n                            <button\n                              className=\"save-note-button\"\n                              onClick={() => handleAddNote(item.id)}\n                            >\n                              Save\n                            </button>\n                            <button\n                              className=\"cancel-note-button\"\n                              onClick={() => {\n                                setEditingNote(null);\n                                setNoteText('');\n                              }}\n                            >\n                              Cancel\n                            </button>\n                          </div>\n                        </div>\n                      ) : (\n                        <div className=\"note-display\">\n                          {item.notes ? (\n                            <p className=\"note-text\">{item.notes}</p>\n                          ) : (\n                            <p className=\"no-notes\">No notes added</p>\n                          )}\n                          <button\n                            className=\"edit-note-button\"\n                            onClick={() => startEditingNote(item)}\n                          >\n                            {item.notes ? 'Edit Note' : 'Add Note'}\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n});\n\nPlantHistory.displayName = 'PlantHistory';\n\nexport default PlantHistory;\n"],"names":["OptimizedImage","React","_ref","src","alt","width","height","className","onClick","placeholder","quality","loading","imageSrc","setImageSrc","useState","isLoaded","setIsLoaded","isInView","setIsInView","hasError","setHasError","imgRef","useRef","observerRef","compressImage","useCallback","base64","Promise","resolve","canvas","document","createElement","ctx","getContext","img","Image","onload","ratio","Math","min","drawImage","compressedBase64","toDataURL","useEffect","current","IntersectionObserver","_ref2","entry","_observerRef$current","isIntersecting","disconnect","threshold","rootMargin","observe","_observerRef$current2","async","startsWith","compressedSrc","error","console","loadImage","handleImageLoad","handleImageError","_jsxs","concat","style","children","_jsx","ref","onLoad","onError","objectFit","transition","displayName","PlantHistory","onClose","onSelectPlant","plantHistory","removeFromHistory","toggleFavorite","addNoteToPlant","usePlantStore","filter","setFilter","searchTerm","setSearchTerm","editingNote","setEditingNote","noteText","setNoteText","filteredHistory","useMemo","item","matchesFilter","isFavorite","matchesSearch","plant","label","toLowerCase","includes","scientificName","handleAddNote","id","startEditingNote","notes","formatDate","timestamp","Date","toLocaleDateString","year","month","day","hour","minute","type","value","onChange","e","target","length","map","capturedImage","title","confidence","round","source","rows"],"sourceRoot":""}